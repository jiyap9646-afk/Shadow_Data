<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shadow Data</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
 
  <!-- AOS Animation Library -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>


  <style>
    .robotic-font {
      font-family: 'Orbitron', sans-serif;
    }
    .clean-font {
      font-family: 'Share Tech Mono', monospace;
    }


    /* Neon glow borders */
    .neon-blue {
      border: 2px solid #06b6d4;
      box-shadow: 0 0 10px #06b6d4, 0 0 20px #06b6d4, 0 0 40px #06b6d4;
    }
  </style>
</head>
<body class="bg-gradient-to-b from-gray-800 via-gray-900 to-gray-800 text-white">


  <!-- Header -->
  <header
    class="relative text-white shadow border-4 border-gray-700 rounded-b-3xl overflow-hidden"
    style="height: 60vh;">
   
    <!-- Background Image (blurred) -->
    <div class="absolute inset-0 bg-cover bg-center blur-sm "
      style="background-image: url('https://plus.unsplash.com/premium_photo-1661872817492-fd0c30404d74?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8Y29tcHV0ZXIlMjBzY2llbmNlfGVufDB8fDB8fHww');">
    </div>
   
    <!-- Overlay -->
    <div class="absolute inset-0 bg-black/60 flex flex-col items-center justify-center text-center px-6">
      <h1 class="robotic-font text-6xl md:text-7xl font-extrabold drop-shadow-xl">SHADOW DATA</h1>
      <p class="clean-font mt-6 text-base md:text-lg max-w-2xl text-gray-300 tracking-wide">
        Uncover the hidden truths about your digital footprint
      </p>
    </div>
  </header>


  <!-- Main Layout -->
  <main class="max-w-3xl mx-auto px-6 py-16 flex flex-col gap-12">


    <!-- Upload Box -->
    <section data-aos="fade-up" data-aos-duration="1200" class="bg-gray-900/70 rounded-2xl p-8 shadow-xl neon-blue">
      <h2 class="robotic-font text-2xl font-bold mb-6">How Exposed Are You Online?</h2>
      <p class="text-gray-300 mb-6">Upload your Google Takeout <span class="font-semibold">My Activity</span> file and uncover what Google really knows about you.</p>
     
      <form action="/upload" method="POST" enctype="multipart/form-data" class="flex flex-col gap-4">
        <label class="bg-white text-gray-900 px-6 py-3 rounded-xl cursor-pointer hover:bg-gray-100 transition font-medium shadow">
          Select File
          <input type="file" name="file" class="hidden" required>
        </label>
        <button type="submit" class="px-8 py-3 rounded-xl bg-blue-500 text-white hover:bg-blue-600 transition font-semibold shadow">
          üöÄ Analyze Now
        </button>
      </form>
      <p class="mt-3 text-xs text-gray-400">‚ö° 100% Privacy First ‚Äî your file never leaves this demo</p>
    </section>


    <!-- Steps Box -->
    <section data-aos="fade-up" data-aos-duration="1200" data-aos-delay="300" class="bg-gray-900/70 rounded-2xl p-8 shadow-xl neon-blue">
      <h2 class="robotic-font text-2xl font-bold mb-6">Steps to Get Your Google Takeout File</h2>
      <ol class="clean-font text-gray-300 list-decimal list-inside space-y-3">
        <li>Go to <a href="https://takeout.google.com" target="_blank" class="text-blue-400 hover:underline">Google Takeout</a> and log in with your Google account.</li>
        <li>Select the files of which you need info (like Location, YouTube, Search, etc.).</li>
        <li>Google will prepare your data and send you the download link via Gmail.</li>
        <li>Download and <span class="font-semibold">unzip the file</span> from your Gmail link.</li>
        <li>Upload the unzipped file here to see how exposed you really are.</li>
      </ol>
    </section>


  </main>
{% if filename %}
<!-- Results -->
<!-- Speedometer Section -->
<section class="bg-gray-900/80 rounded-2xl shadow-lg p-6 text-white border-2 border-blue-400/70 mt-8 neon-blue">
  <h3 class="font-semibold text-lg text-blue-300 mb-4">üì° Detailed Risk Speedometer</h3>
  <p class="text-gray-300 mb-4">
    This speedometer visually shows your privacy risk. The needle moves based on your activity level and exposure.
  </p>
<canvas id="speedometer" class="w-full h-64"></canvas>
</section>



  <!-- Personality Box -->
  <div class="bg-gray-900/80 rounded-2xl shadow-lg p-6 text-white border-2 border-blue-400/70 hover:shadow-[0_0_20px_#06b6d4,0_0_40px_#06b6d4,0_0_80px_#06b6d4] transition-shadow duration-500">
    <h3 class="font-semibold text-lg text-blue-300 mb-3">üß† Your Data Personality</h3>
    <p>{{ personality }}</p>
  </div>


  <!-- Suggestions Box -->
  <div class="bg-gray-900/80 rounded-2xl shadow-lg p-6 text-white border-2 border-blue-400/70 hover:shadow-[0_0_20px_#06b6d4,0_0_40px_#06b6d4,0_0_80px_#06b6d4] transition-shadow duration-500">
    <h3 class="font-semibold text-lg text-blue-300 mb-3">üõ°Ô∏è Privacy Suggestions</h3>
    <ul class="list-disc list-inside space-y-1">
      {% for s in risk_suggestions %}
      <li>{{ s }}</li>
      {% endfor %}
    </ul>
  </div>


  <!-- Charts Box -->
  <div class="bg-gray-900/80 rounded-2xl shadow-lg p-6 text-white border-2 border-blue-400/70 hover:shadow-[0_0_20px_#06b6d4,0_0_40px_#06b6d4,0_0_80px_#06b6d4] transition-shadow duration-500">
    {% if chart_url %}
    <h3 class="font-semibold text-lg text-blue-300 mb-3">üìà Activity Breakdown</h3>
    <img class="mx-auto rounded-xl shadow" src="{{ url_for('static', filename=chart_url) }}" alt="Activity Chart">
    {% endif %}
  </div>




  <!-- Category Counts Box -->
  <div class="bg-gray-900/80 rounded-2xl shadow-lg p-6 text-white border-2 border-blue-400/70 hover:shadow-[0_0_20px_#06b6d4,0_0_40px_#06b6d4,0_0_80px_#06b6d4] transition-shadow duration-500">
    <h3 class="font-semibold text-lg text-blue-300 mb-3">üìå Detailed Counts</h3>
    <div class="grid md:grid-cols-2 gap-3 text-sm">
      {% for k, v in categories.items() %}
      <div class="flex items-center justify-between bg-gray-800/70 border border-gray-700 rounded-lg px-3 py-2 text-white"
           style="box-shadow: 0 0 10px #06b6d4, 0 0 20px #06b6d4;">
        <span>{{ k }}</span>
        <span class="font-mono font-semibold">{{ v }}</span>
      </div>
      {% endfor %}
    </div>
  </div>


</section>
{% endif %}




  <!-- Footer -->
  <footer class="text-center py-6 border-t border-gray-700 bg-black/60">
    <p class="clean-font text-gray-400 text-sm">
      ‚ö° Built with <span class="text-pink-500">‚ô•</span> for Hackathon
    </p>
  </footer>


  <!-- Init AOS -->
  <script>
    AOS.init();
  </script>

    <!-- Speedometer: responsive + HiDPI crisp -->
  <script>
(function(){
  const canvas = document.getElementById('speedometer');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  const percent = {{ risk_percent if risk_percent is not none else 0 }};
  let current = 0;

  function resizeCanvas(){
    const dpr = window.devicePixelRatio || 1;
    const cssWidth = canvas.parentElement.clientWidth || 520;
    const cssHeight = Math.max(cssWidth/2, 220);
    canvas.style.width = cssWidth + 'px';
    canvas.style.height = cssHeight + 'px';
    canvas.width = Math.floor(cssWidth * dpr);
    canvas.height = Math.floor(cssHeight * dpr);
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }

  function draw(p){
    const w = canvas.clientWidth;
    const h = canvas.clientHeight;
    const cx = w/2, cy = h - 8;
    const radius = Math.min(w/2 - 40, 180);

    ctx.clearRect(0,0,w,h);

    // Draw base arc (semi-transparent dark)
    ctx.beginPath();
    ctx.lineWidth = 34;
    ctx.strokeStyle = '#333';
    ctx.arc(cx, cy, radius, Math.PI, 2*Math.PI);
    ctx.stroke();

    // Draw colored gradient arc
    const gradient = ctx.createLinearGradient(cx-radius, cy, cx+radius, cy);
    gradient.addColorStop(0, '#16a34a'); // green
    gradient.addColorStop(0.33, '#16a34a');
    gradient.addColorStop(0.34, '#f59e0b'); // yellow
    gradient.addColorStop(0.66, '#f59e0b');
    gradient.addColorStop(0.67, '#ef4444'); // red
    gradient.addColorStop(1, '#ef4444');

    ctx.beginPath();
    ctx.lineWidth = 34;
    ctx.strokeStyle = gradient;
    ctx.arc(cx, cy, radius, Math.PI, 2*Math.PI);
    ctx.stroke();

    // Tick marks & labels
    const ticks = [0, 25, 50, 75, 100];
    ctx.lineWidth = 2;
    ctx.strokeStyle = '#e6edf3';
    ctx.fillStyle = '#e6edf3';
    ctx.font = 'bold 14px Roboto, Arial';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ticks.forEach(t=>{
      const angle = Math.PI + (t/100)*Math.PI;
      const x1 = cx + (radius-10)*Math.cos(angle);
      const y1 = cy + (radius-10)*Math.sin(angle);
      const x2 = cx + radius * Math.cos(angle);
      const y2 = cy + radius * Math.sin(angle);
      ctx.beginPath();
      ctx.moveTo(x1,y1);
      ctx.lineTo(x2,y2);
      ctx.stroke();
      const lx = cx + (radius+20) * Math.cos(angle);
      const ly = cy + (radius+20) * Math.sin(angle);
      ctx.fillText(t + '%', lx, ly);
    });

    // Needle
    const angle = Math.PI + (p/100)*Math.PI;
    const nx = cx + (radius-20) * Math.cos(angle);
    const ny = cy + (radius-20) * Math.sin(angle);
    ctx.beginPath();
    ctx.lineWidth = 4;
    ctx.strokeStyle = '#e6edf3';
    ctx.moveTo(cx, cy);
    ctx.lineTo(nx, ny);
    ctx.stroke();

    // Needle center
    ctx.beginPath();
    ctx.fillStyle = '#e6edf3';
    ctx.arc(cx, cy, 6, 0, 2*Math.PI);
    ctx.fill();

    // Digital display
    ctx.fillStyle = '#e6edf3';
    ctx.font = 'bold 28px Roboto, Arial';
    ctx.fillText(Math.round(p) + '%', cx, cy + 44);
  }

  function animateTo(target){
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if(prefersReduced){ draw(target); return; }
    const startTime = performance.now();
    const startVal = current;
    const duration = 900;
    function tick(now){
      const t = Math.min(1, (now - startTime)/duration);
      const ease = t < 0.5 ? 2*t*t : -1 + (4-2*t)*t;
      current = startVal + (target - startVal)*ease;
      draw(current);
      if(t < 1) requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);
  }

  window.addEventListener('resize', ()=>{ resizeCanvas(); draw(current); });
  resizeCanvas();
  animateTo(percent);
})();
</script>
</body>

</html>